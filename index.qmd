---
title: "Estimating the Determinants of Health Literacy for Policy Prioritisation"
# : A Local Level Case Study in Newham, London
subtitle: "UCL CDS Symposium on Data Science in Public Health"
author: "Nathan Green"
institute: "Department of Statistical Science, UCL"
format:
  revealjs:
    show-slide-number: all
    incremental: true
    footer: "Nathan Green | UCL | n.green@ucl.ac.uk"
    slide-number: 'c/t' # Enables page numbers (can be 'true', 'c', 'c/t', 'h.v')
    # theme: [default, custom.scss]
    theme: [default, ucl-theme.scss]
    # css : styles.css
    self-contained: true
     # Include JavaScript to dynamically add the bars to the document body
    include-in-header:
      - text: |
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              // Top Bar
              const topBar = document.createElement('div');
              topBar.className = 'top-bar';
              topBar.innerHTML = '<img src="ucl_logo.svg" alt="UCL Logo" class="ucl-logo"><span class="presentation-title">Determinants of Health Literacy</span><span class="author-info"></span>';
              document.body.appendChild(topBar);

              // Initial update for the first slide
              const initialSlideNumberElement = bottomBar.querySelector('.slide-number-display');
              if (initialSlideNumberElement) {
                  setTimeout(() => { // Small delay to ensure Reveal.js is ready
                      initialSlideNumberElement.textContent = `1 / ${Reveal.getTotalSlides()}`;
                  }, 100);
              }
            });
          </script>
filters:
  - emoji-filter.lua
editor: visual
smaller: true
progress: true
bibliography: mybib.bib
---

```{=html}
<style>
.reveal .sourceCode pre,
.reveal .sourceCode code,
.reveal pre code {
  font-size: 0.6em; /* Adjust as needed */
}
</style>
```

<!-- type 's' for speaker view -->

## Outline

-   Background
-   Problems
-   Solutions
    -   Local level estimation
    -   Predictive comparisons
    -   Prioritisation with SUCRA
-   Main results
-   Sensitivity analysis
-   Conclusion

:::: fragment
::: callout-note
## Resources

Slides and code here: `github.com/n8thangreen/data-science-in-health-talk`
:::
::::

::: notes
Remember to introduce myself and the topic here.
emerging approaches at the interface of data science, statistics, and public health. 
how data-driven methods are shaping real-world health impact.
:::

<!-- ##  -->

<!-- ::: panel-tabset -->

<!-- ## Tab 1 -->

<!-- Content for Tab 1. -->

<!-- ## Tab 2 -->

<!-- Content for Tab 2. -->

<!-- ::: -->

## Background

<div align="center">

![](fellowship-webpage.png)

</div>

<!-- <img src="fellowship-webpage.png"> -->

## Background

-   Project title: **Assessed  the factors that determine health literacy and the size of their influence/impact for Newham** 

-   [Health literacy]{style="color: blue;"} is broadly defined as the ability to access, understand, appraise, and communicate health information, enabling individuals to engage in healthcare and maintain good health throughout their lives.


## 

-   Focusses on [Newham]{style="color: blue;"}, a diverse borough in East London that faces unique challenges
-   Identified as having some of the [lowest levels]{style="color: blue;"} of health literacy in the UK by University of Southampton (https://healthliteracy.geodata.uk/)

::::: columns
::: {.column width="50%"}
![](health-literacy-map.png)
:::

::: {.column width="50%"}
![](health-literacy-graph.png)
:::
:::::

## Previous method: Synthetic estimation

-   Weighted Logistic Regression with Synthetic Estimation (@laursen2016developing)
    -   Frequentist single-level regression with poststratification
-   Used in geography (@gonzalez1973use; @rao2015small)
-   Can be viewed as the simpler predecessor to [Multilevel Regression with Post-stratification (MRP)]{style="color: blue;"}
    -   Ignores any unique local factors
    -   MRP includes shrinkage via random effects


## Some (rough) comparisons


| Small Area Estimation (SAE) | | HTA / Statistics Method |
| :---- | :--: | :--- |
| Weighted Logistic Regression with Synthetic Estimation<br><br><ul><li>Ignores any unique local factors</li></ul> | $\longrightarrow$ | Multilevel Regression with Post-stratification (MRP)<br><ul><li>Includes shrinkage via random effects</li></ul> |
| Linear Plug-In Model<br>*(Equivalent to Regression-Synthetic Estimator at Unit Level)* | $\longrightarrow$ | Simulated Treatment Comparison (STC) |
| Residual-adjusted synthetic estimation | $\longrightarrow$ | Targeted Maximum Likelihood Estimation (TMLE)<br>*(in causal inference)* |

## Problem

-   What are the ['drivers']{style="color: blue;"} of health literacy?
-   Can we [quantify]{style="color: blue;"} them? [Specific]{style="color: blue;"} to Newham?
-   What would happen to health literacy if we were to [intervene]{style="color: blue;"} to effect one of these?


## Data

-   **Newham Residents Survey 2023 (NRS)**
    * Periodic survey, usually every two years
    * Detailed information on views, experiences, and needs of Newham residents
    * Covers satisfaction with local services, community safety, health and well-being, housing, and employment

-   **Skills for Life (SfL) Survey 2011**
    * Comprehensive computer-based assessment conducted by the ONS to evaluate the skills of literacy, numeracy, and ICT
    * Total 7230 adults in England. 
    
-   Additional data

    -   Labour Force Survey (LFS) / Annual Population Survey (APS)
    -   UK Programme for the International Assessment of Adult Competencies (PIAAC) 2023
    -   Skills for Life Survey 2003
    -   UK Census 2011, 2021

## Newham vs SfL profiles

![](dumbbell_plot_literacy.png)

## Mutlilevel Regression and Post-stratification

::::: columns
::: {.column width="50%"}
The predicted probability $\hat{\pi}_i$ is defined as: $$
\hat{\pi}_i = \text{logit}^{-1} \left( \hat{\beta}_0 + \sum_{x} \hat{\beta}^{x}_{\gamma_x[i]} \right)
$$
:::

::: {.column width="50%"}
- $\hat{\beta}_0$ is the intercept, $\hat{\beta}^{x}_{\gamma_x[i]}$ are coefficients for covariates $x$
     * age, sex, English language, white ethnicity, UK born, qualifications, income, job status, work role, home ownership
- $\gamma_x[i]$ represents the level or category for covariate $x$ for individual $i$. 
- IMD is included as multilevel random effects $\beta^{\text{IMD}}_j \sim \text{N}(\mu_{\text{IMD}}, \sigma_{\text{IMD}}^2)$
- Prior distributions for fixed effects normal distributions centered at zero with modest variance
- Half-normal priors are used for random effect standard deviations \cite{gelman2006}.
:::
:::::

## 

The health literacy probabilities for each demographic category (cell $c$) are weighted by their proportion in the actual Newham population. With 11 covariates resulting in $|\mathcal{S}|$ = 13,824 cells, the post-stratified estimate $\hat{\pi}^{\text{mrp}}$ is: $$
\hat{\pi}^{\text{mrp}} = \sum_{c = 1}^{|\mathcal{S}|} w_c \hat{\pi}_{c}
$$ where $\mathcal{S}$ is the set of all covariate combinations, $N_c$ is the population frequency for cell $c$, $N$ is the total population size, and $w_c = N_{c} / N$ are the combination weights.

## Predictive comparisons :thinking:

-   Terminology borrow from @gelman2007average. Also called [predicted change in probability]{style="color: blue;"}
-   Previously, crops up in other fields e.g. @lee1981covariance ([covariance adjustment mean difference]{style="color: blue;"})
-   Like [average treatment effects]{style="color: blue;"} without the causal interpretation

$$
\delta_u(u^{(1)}, u^{(2)}) = \frac{E(y \mid u^{(2)}) - E(y \mid u^{(1)})}{u^{(2)} - u^{(1)}}
$$

## Raking / Iterative proportional fitting

**The Goal:** Adjust survey weights ($w$) so that the sample distribution matches known population control totals (margins).

::::: columns
::: {.column width="50%"}
### 1. Setup

Let $w_{ij}^{(t)}$ be the weight for cell $(i, j)$ at iteration $t$.

We have **Target Margins**:

-   $R_i$: Target total for row $i$
-   $C_j$: Target total for col $j$
:::

::: {.column width="50%"}
### 2. The Mismatch

Initially ($t=0$), the sample sums do not match the population targets:

$$
\sum_{j} w_{ij}^{(0)} \neq R_i
$$

$$
\sum_{i} w_{ij}^{(0)} \neq C_j
$$
:::
:::::

------------------------------------------------------------------------

## The Iterative Algorithm {visibility="hidden"}

The algorithm alternates between adjusting rows and columns until convergence.

**Step 1: Row Raking** (Match Row Targets) $$
w_{ij}^{(t+1/2)} = w_{ij}^{(t)} \times \frac{R_i}{\sum_{k} w_{ik}^{(t)}}
$$

**Step 2: Column Raking** (Match Column Targets) $$
w_{ij}^{(t+1)} = w_{ij}^{(t+1/2)} \times \frac{C_j}{\sum_{k} w_{kj}^{(t+1/2)}}
$$

**Convergence** Repeat until $\left| \sum w - \text{Target} \right| < \epsilon$.

## Priority ranking

To summarize these probabilistic rankings, we adopt the \emph{Surface Under the Cumulative Ranking Curve (SUCRA)} metric, common in multiple-treatment meta-analysis \cite{Salanti2011}. SUCRA represents the percentage of the maximum possible cumulative rank an intervention (in our case, an input variable) can achieve, providing a single value where a higher SUCRA indicates a better overall rank relative to others. For our model, it is given by the following $$
\text{SUCRA}_{ij} = \sum_{r=1}^{n-1} P_{ijr} / (n-1),
$$ \noindent where $P_{ijr}$ is the cumulative probability for variable $i$ at level $j$ and rank $r$. The mean rank is $$
\mathbb{E}[\text{rank}(i,j)] = n - \sum_{r=1}^{n-1} P_{ijr}.
$$

## Main results :thumbsup:


## Outcome dilution

## Outcome dilution: Results

::: {.r-stack}
![](ame_forest_group_plot_piaac_imp_outcome.png){.fragment width="80%" fig-align="center"}

![](ame_forest_group_plot_piaac_imp_diluted_0.5.png){.fragment width="80%" fig-align="center"}

![](ame_forest_group_plot_piaac_imp_diluted_1.png){.fragment width="80%" fig-align="center"}
:::

## Sensitivity analyses :thumbsup:

-   [Easier Maintenance]{style="color: blue;"}: You maintain one core piece of code. Changes to the underlying logic only need to be applied in one place.

## Other data sets

:::: fragment
::: callout-note
## Reference

Green, N., Kurt, M., Moshyk, A., Larkin, J. and Baio, G. (2025), A Bayesian Hierarchical Mixture Cure Modelling Framework to Utilize Multiple Survival Datasets for Long-Term Survivorship Estimates: A Case Study From Previously Untreated Metastatic Melanoma. Statistics in Medicine, 44: e70132. https://doi.org/10.1002/sim.70132
:::
::::

## Conclusions

## Thanks :thankyou:

<!-- ##  -->

<!-- ::::: columns -->

<!-- ::: {.column width="50%"} -->

<!-- Left column content. -->

<!-- ::: -->

<!-- ::: {.column width="50%"} -->

<!-- Right column content. -->

<!-- ::: -->

<!-- ::::: -->

<!-- ## Map from one model to the next -->

<!-- ``` {.r code-line-numbers="|6|11"} -->

<!-- code -->

<!-- ``` -->

## References
